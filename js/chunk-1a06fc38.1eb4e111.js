(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a06fc38"],{"11cc":function(t,e,a){"use strict";var i=a("e431"),n=a.n(i);n.a},"25f0":function(t,e,a){"use strict";var i=a("6eeb"),n=a("825a"),s=a("d039"),c=a("ad6d"),r="toString",o=RegExp.prototype,l=o[r],m=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=r;(m||u)&&i(RegExp.prototype,r,(function(){var t=n(this),e=String(t.source),a=t.flags,i=String(void 0===a&&t instanceof RegExp&&!("flags"in o)?c.call(t):a);return"/"+e+"/"+i}),{unsafe:!0})},"2ab3":function(t,e,a){},"80a5":function(t,e,a){},"87bd":function(t,e,a){"use strict";var i=a("bb45"),n=a.n(i);n.a},"90d0":function(t,e,a){},"9d11":function(t,e,a){"use strict";var i=a("2ab3"),n=a.n(i);n.a},b14b:function(t,e,a){"use strict";var i=a("90d0"),n=a.n(i);n.a},b423:function(t,e,a){"use strict";var i=a("80a5"),n=a.n(i);n.a},bb45:function(t,e,a){},e431:function(t,e,a){},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),s=a("e8b5"),c=a("23cb"),r=a("50c4"),o=a("fc6a"),l=a("8418"),m=a("b622"),u=a("1dde"),d=a("ae40"),p=u("slice"),g=d("slice",{ACCESSORS:!0,0:0,1:2}),f=m("species"),v=[].slice,h=Math.max;i({target:"Array",proto:!0,forced:!p||!g},{slice:function(t,e){var a,i,m,u=o(this),d=r(u.length),p=c(t,d),g=c(void 0===e?d:e,d);if(s(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?n(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(u,p,g);for(i=new(void 0===a?Array:a)(h(g-p,0)),m=0;p<g;p++,m++)p in u&&l(i,m,u[p]);return i.length=m,i}})},ff59:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.playlistDetail?a("div",{ref:"playlistContainer",staticClass:"playlist-container"},[a("PlayListHeader",{ref:"header",attrs:{imgUrl:t.playlistDetail.coverImgUrl,title:t.playlistDetail.name,avatarUrl:t.playlistDetail.creator.avatarUrl,creatorName:t.playlistDetail.creator.nickname,createTime:t.playlistDetail.createTime},on:{playallClick:t.playallClick}}),a("div",{staticClass:"playlist-table"},[a("Tabs",{attrs:{names:t.tabNames},on:{activeIdxChange:t.activeIdxChange}}),a("SongTable",{directives:[{name:"show",rawName:"v-show",value:0==t.activeIdx,expression:"activeIdx == 0"}],attrs:{songs:t.songs}}),a("Comment",{directives:[{name:"show",rawName:"v-show",value:1==t.activeIdx,expression:"activeIdx == 1"}],attrs:{comments:t.comments,totalPage:t.totalPage,currPage:t.currPage},on:{pagePrev:t.pagePrev,pageNext:t.pageNext}})],1)],1):t._e()},n=[],s=(a("d81d"),a("fb6a"),a("d3b7"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playlist-header"},[a("div",{staticClass:"bg-img",style:{"background-image":"url("+t.imgUrl+")"}}),a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:t.imgUrl,alt:""}})]),a("div",{staticClass:"content"},[a("div",{staticClass:"title-wrap"},[a("div",{staticClass:"title"},[t._v(t._s(t.title))])]),a("div",{staticClass:"creator-wrap"},[a("img",{attrs:{src:t.avatarUrl,alt:""}}),a("div",{staticClass:"creator-name"},[t._v(t._s(t.creatorName))]),a("div",{staticClass:"create-time"},[t._v("创建于 "+t._s(t.getCreateDate))])]),a("div",{staticClass:"action-wrap"},[a("button",{on:{click:t.playallClick}},[t._v("播放全部")])]),a("div",{staticClass:"desc-wrap"})])])}),c=[],r=(a("a9e3"),a("5691")),o={name:"PlayListHeader",props:{imgUrl:{type:String,default:""},title:{type:String,default:""},avatarUrl:{type:String,default:""},creatorName:{type:String,default:""},createTime:{type:Number,default:0}},data:function(){return{}},methods:{playallClick:function(){this.$emit("playallClick")}},computed:{getCreateDate:function(){return Object(r["b"])(this.createTime)}}},l=o,m=(a("9d11"),a("2877")),u=Object(m["a"])(l,s,c,!1,null,"0e9c0502",null),d=u.exports,p=a("17fe"),g=a("01ba"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-list"},[t.comments.length?t._e():a("div",{staticClass:"info"},[t._v("暂时没有评论哦~")]),t._l(t.comments,(function(t,e){return a("CommentItem",{key:e,attrs:{comment:t}})})),a("Pagination",{attrs:{totalPage:t.totalPage,currPage:t.currPage},on:{pagePrev:t.pagePrev,pageNext:t.pageNext}})],2)},v=[],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-item"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.comment.user.avatarUrl,alt:""}})]),a("div",{staticClass:"comment-content"},[a("div",{staticClass:"comment-text"},[a("span",{staticClass:"username"},[t._v(t._s(t.comment.user.nickname)+": ")]),a("span",{staticClass:"text"},[t._v(t._s(t.comment.content))])]),t.comment.beReplied.length?a("div",{staticClass:"comment-text comment-reply"},[a("span",{staticClass:"username"},[t._v(t._s(t.comment.beReplied[0].user.nickname)+": ")]),a("span",{staticClass:"text"},[t._v(t._s(t.comment.beReplied[0].content))])]):t._e(),a("div",{staticClass:"comment-time"},[t._v(" "+t._s(t.getCreateDate)+" ")])])])},b=[],y={name:"CommentItem",props:["comment"],data:function(){return{}},methods:{},computed:{getCreateDate:function(){return Object(r["b"])(this.comment.time,"Second")}}},C=y,P=(a("b423"),Object(m["a"])(C,h,b,!1,null,"17223052",null)),x=P.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.totalPage?a("div",{staticClass:"pagination"},[a("i",{staticClass:"iconfont icon-page-prev",on:{click:t.pagePrev}}),a("span",[t._v(" "+t._s(t.currPage)+" / "+t._s(t.totalPage)+" ")]),a("i",{staticClass:"iconfont icon-page-next",on:{click:t.pageNext}})]):t._e()},$=[],N={name:"Pagination",props:{totalPage:{type:Number,default:0},currPage:{type:Number,default:0}},data:function(){return{}},methods:{pagePrev:function(){this.currPage>1&&this.$emit("pagePrev")},pageNext:function(){this.currPage<this.totalPage&&this.$emit("pageNext")}}},w=N,k=(a("b14b"),Object(m["a"])(w,_,$,!1,null,"2f74050c",null)),S=k.exports,L={name:"Comment",props:{comments:{type:Array,default:function(){return[]}},totalPage:{type:Number,default:0},currPage:{type:Number,default:0}},components:{CommentItem:x,Pagination:S},data:function(){return{}},methods:{pagePrev:function(){this.$emit("pagePrev")},pageNext:function(){this.$emit("pageNext")}}},I=L,O=(a("11cc"),Object(m["a"])(I,f,v,!1,null,"c3d8e136",null)),j=O.exports,D=a("1ae0"),T={name:"PlayListView",props:["id"],created:function(){this.getMusicbyPlayList(this.id)},components:{PlayListHeader:d,Tabs:p["a"],SongTable:g["a"],Comment:j},data:function(){return{songs:[],comments:[],playlistDetail:null,tabNames:["歌曲列表"],activeIdx:0,commentNum:0,totalPage:0,currPage:0}},watch:{id:function(t){this.getMusicbyPlayList(t)}},methods:{getMusicbyPlayList:function(t){var e=this;this.$store.commit("setLoading",!0),Object(D["e"])(t).then((function(t){e.playlistDetail=t.data.playlist;var a=t.data.playlist.trackIds.map((function(t){return t.id}));return a=a.slice(0,e.$config.maxSong).toString(),Object(D["b"])(a)})).then((function(a){return e.songs=a.data.songs,Object(D["f"])(t,0)})).then((function(t){e.commentNum=t.data.total,e.totalPage=Math.ceil(e.commentNum/e.$config.commentLimit),e.currPage=1,e.comments=t.data.comments,e.tabNames.push("评论"+"(".concat(e.commentNum,")"))})).finally((function(){e.$store.commit("setLoading",!1),e.$store.commit("setMenuShowSp",!1),e.$store.commit("setLyricShowSp",!1)}))},activeIdxChange:function(t){this.activeIdx=t},playallClick:function(){this.$store.commit("setPlayList",this.songs),this.$store.commit("setCurrMusicIndex",0)},pagePrev:function(){var t=this;this.$store.commit("setLoading",!0),Object(D["f"])(this.id,this.currPage-2).then((function(e){t.comments=e.data.comments,t.currPage-=1})).finally((function(){t.$store.commit("setLoading",!1),t.$nextTick((function(){t.$refs.playlistContainer.scrollTop=t.$refs.header.$el.offsetHeight}))}))},pageNext:function(){var t=this;this.$store.commit("setLoading",!0),Object(D["f"])(this.id,this.currPage).then((function(e){t.comments=e.data.comments,t.currPage+=1})).finally((function(){t.$store.commit("setLoading",!1),t.$nextTick((function(){t.$refs.playlistContainer.scrollTop=t.$refs.header.$el.offsetHeight}))}))}}},U=T,E=(a("87bd"),Object(m["a"])(U,i,n,!1,null,"ae70c204",null));e["default"]=E.exports}}]);
//# sourceMappingURL=chunk-1a06fc38.1eb4e111.js.map