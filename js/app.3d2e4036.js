(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);f&&f(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var o=i[r];0!==s[o]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},r={app:0},s={app:0},a=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-0cf083de":"f806b7c7","chunk-1a06fc38":"1eb4e111"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(t){var e=[],i={"chunk-0cf083de":1,"chunk-1a06fc38":1};r[t]?e.push(r[t]):0!==r[t]&&i[t]&&e.push(r[t]=new Promise((function(e,i){for(var n="css/"+({}[t]||t)+"."+{"chunk-0cf083de":"0133b02a","chunk-1a06fc38":"87a98992"}[t]+".css",s=c.p+n,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var u=a[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===n||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||s,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete r[t],f.parentNode.removeChild(f),i(a)},f.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){r[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,i){n=s[t]=[e,i]}));e.push(n[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var i=s[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,i[1](d)}s[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"01ba":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"song-list",class:{"song-list-mini":t.mini}},t._l(t.songs,(function(e,n){return i("li",{key:n,staticClass:"song-item",on:{click:function(e){return t.musicClick(n)}}},[t.imgShow?i("div",{staticClass:"img-wrap"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.al.picUrl,expression:"item.al.picUrl"}],attrs:{alt:""}})]):t._e(),i("div",{staticClass:"song-title"},[i("div",{staticClass:"song-name"},[t._v(t._s(e.name))]),i("div",{staticClass:"song-meta"},[t._v(t._s(e.ar[0].name)+" / "+t._s(e.al.name))])]),i("div",{staticClass:"song-time"},[t._v(" "+t._s(t.formatDTime(e.dt))+" ")])])})),0)},r=[],s=i("5691"),a={name:"SongTable",props:{songs:{type:Array,default:function(){return[]}},imgShow:{type:Boolean,default:!0},mini:{type:Boolean,default:!1}},data:function(){return{}},methods:{formatDTime:function(t){return Object(s["a"])(t)},musicClick:function(t){this.$store.commit("setPlayList",this.songs),this.$store.commit("setCurrMusicIndex",t)}}},o=a,c=(i("1325"),i("2877")),u=Object(c["a"])(o,n,r,!1,null,"2c525c00",null);e["a"]=u.exports},"0536":function(t,e,i){},"0ff9":function(t,e,i){"use strict";var n=i("6943"),r=i.n(n);r.a},"113a":function(t,e,i){"use strict";var n=i("8aa0"),r=i.n(n);r.a},1325:function(t,e,i){"use strict";var n=i("312b"),r=i.n(n);r.a},1353:function(t,e,i){},"17fe":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabs"},t._l(t.names,(function(e,n){return i("div",{key:n,staticClass:"tab",class:{"tab-active":n===t.activeIdx},on:{click:function(e){return t.tabClick(n)}}},[t._v(" "+t._s(e)+" ")])})),0)},r=[],s={name:"Tabs",props:{names:{type:Array,default:function(){return[]}}},data:function(){return{activeIdx:0}},methods:{tabClick:function(t){this.activeIdx=t,this.$emit("activeIdxChange",t)}}},a=s,o=(i("5ed3"),i("2877")),c=Object(o["a"])(a,n,r,!1,null,"327157f2",null);e["a"]=c.exports},"1ae0":function(t,e,i){"use strict";i.d(e,"g",(function(){return a})),i.d(e,"h",(function(){return o})),i.d(e,"e",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return d})),i.d(e,"f",(function(){return f})),i.d(e,"d",(function(){return m}));var n=i("bc3a"),r=i.n(n),s=i("db49");function a(t){return r.a.get("/user/detail",{params:{uid:t}})}function o(t){return r.a.get("/user/playlist",{params:{uid:t}})}function c(t){return r.a.get("/playlist/detail",{params:{id:t}})}function u(t){return r.a.get("/song/detail",{params:{ids:t}})}function l(t){return r.a.get("/song/url",{params:{id:t}})}function d(t){return r.a.get("/lyric",{params:{id:t}})}function f(t,e){return r.a.get("/comment/playlist",{params:{id:t,limit:s["a"].commentLimit,offset:e*s["a"].commentLimit}})}function m(){return r.a.get("/personalized")}r.a.defaults.baseURL="http://112.126.77.153:3000"},"1af9":function(t,e,i){},"312b":function(t,e,i){},"368a":function(t,e,i){"use strict";var n=i("1353"),r=i.n(n);r.a},4262:function(t,e,i){"use strict";var n=i("60d6"),r=i.n(n);r.a},"47e5":function(t,e,i){"use strict";var n=i("cdf6"),r=i.n(n);r.a},"4e80":function(t,e,i){"use strict";var n=i("0536"),r=i.n(n);r.a},5691:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return a}));i("a15b"),i("ac1f"),i("5319"),i("1276"),i("498a");function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Day",i=new Date(t),n=""+(i.getMonth()+1),r=""+i.getDate(),s=i.getFullYear(),a=""+i.getHours(),o=""+i.getMinutes(),c=""+i.getSeconds();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),c.length<2&&(c="0"+c),"Day"==e?[s,n,r].join("-"):"Second"==e?[s,n,r].join("-")+" "+[a,o,c].join(":"):void 0}function r(t){var e=Math.floor(t/1e3),i=Math.floor(e/60),n=e%60;return i=""+i,n=""+n,n.length<2&&(n="0"+n),[i,n].join(":")}var s=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g;function a(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;n++){var r=e[n],a=s.exec(r);if(a){var o=r.replace(s,"").trim();o&&i.push({time:(6e4*a[1]+1e3*a[2]+1*(a[3]||0))/1e3,text:o})}}return i}},"56d7":function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"getMenuShowSp",(function(){return ne})),i.d(n,"getLyricShowSp",(function(){return re})),i.d(n,"getAlertShow",(function(){return se})),i.d(n,"getPlaying",(function(){return ae})),i.d(n,"getAlertMessage",(function(){return oe})),i.d(n,"getCurrMusic",(function(){return ce})),i.d(n,"getCurrMusicAlImg",(function(){return ue})),i.d(n,"getCurrPlayList",(function(){return le})),i.d(n,"getLoading",(function(){return de})),i.d(n,"getPercent",(function(){return fe})),i.d(n,"getHistoryList",(function(){return me})),i.d(n,"getUserList",(function(){return ge}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Header"),i("PlayerContent"),i("MusicPlayer")],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{attrs:{id:"header"}},[i("i",{staticClass:"iconfont icon-list",on:{click:t.menuClick}}),i("div",{staticClass:"header-title"},[t._v(" "+t._s(t.$config.headerTitle)+" ")]),i("Search",{staticClass:"search"}),t.islogged?t._e():i("div",{staticClass:"usericon",on:{click:function(e){return t.showDialog(0)}}},[i("i",{staticClass:"iconfont icon-username"}),i("span",[t._v("登录")])]),t.islogged&&t.user?i("div",{staticClass:"usericon",on:{click:function(e){return t.showDialog(1)}}},[i("img",{staticClass:"avatar",attrs:{src:t.user.profile.avatarUrl,alt:""}}),i("span",[t._v(t._s(t.user.profile.nickname))])]):t._e(),i("Dialog",{ref:"loginDialog",attrs:{"head-text":"登录","confirm-btn-text":"登录"},on:{confirm:t.loginConfirm}},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.uidVal,expression:"uidVal",modifiers:{trim:!0}}],attrs:{type:"number",placeholder:"输入网易云UID"},domProps:{value:t.uidVal},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginConfirm(e)},input:function(e){e.target.composing||(t.uidVal=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),i("Dialog",{ref:"logoutDialog",on:{confirm:t.logoutConfirm}},[i("p",[t._v("确定退出当前用户吗")])]),i("Dialog",{ref:"alertDialog",attrs:{type:"alert"},on:{confirm:t.alertConfirm}},[i("p",[t._v(t._s(t.getAlertMessage))])]),i("Loading",{directives:[{name:"show",rawName:"v-show",value:t.getLoading,expression:"getLoading"}]})],1)},c=[],u=i("5530"),l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},d=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("input",{attrs:{type:"text"}}),i("i",{staticClass:"iconfont icon-search"})])}],f={name:"Search",data:function(){return{}},methods:{}},m=f,g=(i("4e80"),i("2877")),h=Object(g["a"])(m,l,d,!1,null,"b4378e08",null),p=h.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"dialog-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogShow,expression:"dialogShow"}],staticClass:"dialog-box"},[i("div",{staticClass:"dialog-wrapper"},[i("div",{staticClass:"dialog-head"},[t._v(t._s(t.headText))]),i("div",{staticClass:"dialog-content"},[t._t("default")],2),i("div",{staticClass:"dialog-btns"},[t._t("btn"),i("button",{staticClass:"btn-confirm",on:{click:t.confirmClick}},[t._v(t._s(t.confirmBtnText))]),"confirm"==t.type?i("button",{on:{click:t.cancelClick}},[t._v(t._s(t.cancelBtnText))]):t._e()],2)])])])],1)},y=[],C={name:"Dialog",props:{type:{type:String,default:"confirm"},headText:{type:String,default:"提示"},bodyText:{type:String,default:""},cancelBtnText:{type:String,default:"取消"},confirmBtnText:{type:String,default:"确定"},appendToBody:{type:Boolean,default:!0}},data:function(){return{dialogShow:!1}},methods:{show:function(){this.dialogShow=!0},hide:function(){this.dialogShow=!1},confirmClick:function(){this.$emit("confirm")},cancelClick:function(){this.hide(),this.$emit("cancel")}}},b=C,w=(i("5896"),Object(g["a"])(b,v,y,!1,null,"71071f6c",null)),_=w.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loading"},[i("img",{attrs:{src:t.$config.loadingImg,alt:""}})])},x=[],M={name:"Loading",data:function(){return{}},methods:{}},P=M,k=(i("637a"),Object(g["a"])(P,S,x,!1,null,"7fdd56ba",null)),L=k.exports,$=i("2f62"),I=i("1ae0"),D={name:"Header",components:{Search:p,Dialog:_,Loading:L},data:function(){return{user:null,uidVal:""}},created:function(){this.$store.state.uid&&this.__getUserDetail(this.$store.state.uid)},methods:{showDialog:function(t){switch(t){case 0:this.$refs.loginDialog.show();break;case 1:this.$refs.logoutDialog.show();break}},loginConfirm:function(){this.__getUserDetail(this.uidVal)},logoutConfirm:function(){this.$store.commit("setUid",null),this.$refs.logoutDialog.hide(),this.$router.push("/"),this.$store.commit("clearPlayList")},alertConfirm:function(){this.$store.commit("toggleAlertShow")},__getUserDetail:function(t){var e=this;Object(I["g"])(t).then((function(i){e.user=i.data,e.$refs.loginDialog.hide(),e.$store.commit("setUid",t),Object(I["h"])(t).then((function(t){e.$store.commit("setUserPlayList",t.data.playlist)}))})).catch((function(t){e.$store.commit("setAlertMessage",t)}))},menuClick:function(){this.$store.commit("toggleMenuShowSp")}},computed:Object(u["a"])({},Object($["b"])(["getAlertShow","getAlertMessage","getLoading"])),watch:{getAlertShow:function(t){t?this.$refs.alertDialog.show():this.$refs.alertDialog.hide()}}},j=D,O=(i("df80"),Object(g["a"])(j,o,c,!1,null,"265b6710",null)),T=O.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player-content"},[i("Menu",{staticClass:"menu-view"}),i("div",{staticClass:"router-view-container"},[i("transition",{attrs:{name:"router-view-fade",mode:"out-in"}},[i("router-view",{key:t.$route.path,ref:"routerView",staticClass:"router-view"})],1)],1),i("Lyric",{staticClass:"lyric-view"})],1)},N=[],U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"menu",staticClass:"menu",class:{"menu-active-sp":t.getMenuShowSp}},t._l(t.genMenus,(function(e,n){return i("div",{key:n},[e.title?i("div",{staticClass:"menu-title"},[t._v(t._s(e.title))]):t._e(),t._l(e.sublist,(function(e,n){return i("router-link",{key:n,staticClass:"playlist-item",attrs:{to:e.path,"active-class":"playlist-item-active",tag:"li"}},[i("div",[i("i",{class:["iconfont",e.meta.icon]}),i("span",[t._v(t._s(e.meta.title))])])])}))],2)})),0)},A=[],B=(i("99af"),i("d3b7"),i("8c4f"));r["a"].use(B["a"]);var H=function(){return i.e("chunk-0cf083de").then(i.bind(null,"bd66"))},V=function(){return i.e("chunk-1a06fc38").then(i.bind(null,"ff59"))},X=[{path:"/discovery",component:H,meta:{title:"发现音乐",icon:"icon-music-discvr"}}],J=[{path:"/",redirect:"/discovery"},{path:"/playlist/:id",component:V,props:!0}].concat(X),W=new B["a"]({routes:J}),F={name:"Menu",data:function(){return{menus:[{sublist:X}],menuActive:!1}},methods:{},computed:Object(u["a"])({genMenus:function(){return this.islogged?this.menus.concat(this.getUserList):this.menus}},Object($["b"])(["getUserList","getMenuShowSp"]))},q=F,z=(i("b7e0"),Object(g["a"])(q,U,A,!1,null,"a2b38bc2",null)),G=z.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"music-lyric",class:{"lyric-active-sp":t.getLyricShowSp}},[i("div",{staticClass:"lyric-img"},[i("img",{class:{"img-rotating":t.getPlaying},attrs:{src:t.getCurrMusicAlImg,alt:""}})]),i("div",{staticClass:"lyric-bg"}),i("div",{ref:"lyricContent",staticClass:"lyric-content"},[i("div",{ref:"lyricBlock",staticClass:"lyric-block"},[t.lyric.length?t._e():i("div",{staticClass:"lyric-line"},[t._v("暂无歌词")]),t._l(t.lyric,(function(e,n){return i("div",{key:n,staticClass:"lyric-line",class:{"lyric-line-active":n==t.lyricIdx}},[t._v(" "+t._s(e.text)+" ")])}))],2)])])},K=[],Y=i("5691"),Q={name:"Lyric",data:function(){return{lyric:[],lyricIdx:0,lyricTop:[]}},methods:{getCurrLyric:function(t){var e=this;Object(I["a"])(t.id).then((function(t){t.data.lrc?(e.lyric=Object(Y["c"])(t.data.lrc.lyric),e.$nextTick((function(){e.lyricTop=[];for(var t=0,i=0;i<e.lyric.length;i++){e.lyricTop.push(t);var n=document.querySelector(".lyric-line:nth-of-type(".concat(i+1,")")),r=n.offsetHeight;t+=r}}))):e.lyric=[]}))}},watch:{getCurrMusic:function(t){this.lyricIdx=0,this.getCurrLyric(t)},getPercent:function(t){if(this.lyric.length){for(var e=t*this.getCurrMusic.dt/1e3,i=0,n=0;n<this.lyric.length;n++)e>this.lyric[n].time&&(i=n);this.lyricIdx=i}},lyricIdx:function(t){var e=this.lyricTop[t];this.$refs.lyricContent.scrollTop=e}},computed:Object(u["a"])({},Object($["b"])(["getCurrMusic","getCurrMusicAlImg","getPlaying","getPercent","getLyricShowSp"]))},Z=Q,tt=(i("47e5"),Object(g["a"])(Z,R,K,!1,null,"02f0e903",null)),et=tt.exports,it={name:"PlayerContent",components:{Menu:G,Lyric:et},data:function(){return{}},methods:{}},nt=it,rt=(i("113a"),Object(g["a"])(nt,E,N,!1,null,"52fd172e",null)),st=rt.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"music-player"},[i("div",{staticClass:"music-player-btns",class:{disable:!Boolean(t.getCurrMusic)}},[i("i",{staticClass:"iconfont icon-music-prev",attrs:{title:"上一首"},on:{click:t.prevClick}}),i("div",{staticClass:"play-btn"},[t.getPlaying?i("i",{staticClass:"iconfont icon-pause",attrs:{title:"暂停"},on:{click:t.togglePlaying}}):i("i",{staticClass:"iconfont icon-play",attrs:{title:"播放"},on:{click:t.togglePlaying}})]),i("i",{staticClass:"iconfont icon-music-next",attrs:{title:"下一首"},on:{click:t.nextClick}})]),i("div",{staticClass:"player-coverimg"},[i("img",{attrs:{src:t.getCurrMusicAlImg,alt:""},on:{click:t.alImgClick}}),i("div",{staticClass:"music-bar"},[i("div",{staticClass:"music-bar-meta"},[i("div",{staticClass:"music-bar-info"},[t._v(t._s(t.songName))]),i("div",{staticClass:"music-bar-time"},[t._v(t._s(t.currTimeFormat)+" / "+t._s(t.getCurrMusicDt()))])]),i("Progress",{staticClass:"music-progress",class:{disable:!Boolean(t.getCurrMusic)},attrs:{percent:t.getPercent},on:{percentChangeEnd:t.percentChangeEndSong}})],1)]),i("div",{staticClass:"mode-btns"},[t.getPlaying?i("i",{staticClass:"iconfont icon-pause sp-icon",on:{click:t.togglePlaying}}):i("i",{staticClass:"iconfont icon-play sp-icon",on:{click:t.togglePlaying}}),i("PlayMode",{staticClass:"playmode",attrs:{modeName:t.$config.playMode,mode:t.mode},on:{modeClick:t.modeClick}}),i("div",{staticClass:"mini-playlist"},[i("i",{staticClass:"iconfont icon-play-list",on:{click:t.miniPlylistClick}}),i("transition",{attrs:{name:"mini-playlist-transition"}},[i("miniPlayList",{directives:[{name:"show",rawName:"v-show",value:t.miniPlaylistShow,expression:"miniPlaylistShow"}],staticClass:"mini-playlist-content"})],1)],1)],1),i("div",{staticClass:"music-volume"},[i("i",{staticClass:"iconfont icon-volume"}),i("Progress",{staticClass:"music-volume-progress",attrs:{percent:t.volume},on:{percentChange:t.percentChangeVolume}})],1),i("audio",{ref:"audio",attrs:{src:t.currMusicUrl},on:{timeupdate:t.timeUpdate,ended:t.nextClick}})])},ot=[],ct=(i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"Progress",staticClass:"progress",on:{mousedown:t.progressClick,touchstart:t.progressClick}},[i("div",{ref:"ProgressBar",staticClass:"progress-bar"}),i("div",{ref:"ProgressInner",staticClass:"progress-inner"},[i("div",{ref:"ProgressDot",staticClass:"progress-dot",class:{"progress-dot-active":t.isDragging},on:{mousedown:t.barDown,touchstart:function(e){return e.preventDefault(),t.barDown(e)}}})])])])}),ut=[],lt=(i("a9e3"),{name:"Progress",props:{percent:{type:Number,default:0}},data:function(){return{startX:-1,isDragging:!1}},watch:{percent:function(t){if(!this.isDragging){var e=t*this.$refs.ProgressBar.clientWidth;this.moveDot(e)}}},methods:{bindEvents:function(){document.addEventListener("mousemove",this.barMove),document.addEventListener("mouseup",this.barUp),document.addEventListener("touchmove",this.barMove),document.addEventListener("touchend",this.barUp)},unbindEvents:function(){document.removeEventListener("mousemove",this.barMove),document.removeEventListener("mouseup",this.barUp),document.removeEventListener("touchmove",this.barMove),document.removeEventListener("touchend",this.barUp)},progressClick:function(t){var e=t.clientX||t.touches[0].pageX,i=Math.min(this.$refs.ProgressBar.clientWidth,Math.max(0,e-this.startX));this.moveDot(i),this.barDown()},barDown:function(){this.isDragging=!0},barMove:function(t){if(this.isDragging){t.preventDefault();var e=t.clientX||t.touches[0].pageX,i=Math.min(this.$refs.ProgressBar.clientWidth,Math.max(0,e-this.startX));this.moveDot(i),this.emitPercent()}},barUp:function(){this.isDragging&&(this.isDragging=!1,this.emitPercent(!0))},moveDot:function(t){this.$refs.ProgressInner.style.width="".concat(t,"px")},emitPercent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$refs.ProgressBar.clientWidth,i=this.$refs.ProgressInner.clientWidth/e;this.$emit(t?"percentChangeEnd":"percentChange",i)}},mounted:function(){var t=this;if(this.bindEvents(),setTimeout((function(){var e=t.$refs.ProgressBar.getBoundingClientRect();t.startX=e.left}),100),!this.isDragging){var e=this.percent*this.$refs.ProgressBar.clientWidth;this.moveDot(e)}},beforeDestroy:function(){this.unbindEvents()}}),dt=lt,ft=(i("368a"),Object(g["a"])(dt,ct,ut,!1,null,"04d857ac",null)),mt=ft.exports,gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.modeName,(function(e,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:n==t.mode,expression:"index == mode"}],key:n},[i("i",{staticClass:"iconfont",class:[e.icon],attrs:{title:e.name},on:{click:t.modeClick}})])})),0)},ht=[],pt={name:"PlayMode",props:{modeName:{type:Array,default:function(){return[]}},mode:{type:Number,default:0}},data:function(){return{}},methods:{modeClick:function(){var t=(this.mode+1)%this.modeName.length;this.$emit("modeClick",t)}}},vt=pt,yt=(i("0ff9"),Object(g["a"])(vt,gt,ht,!1,null,"13104917",null)),Ct=yt.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mini-playlist"},[i("Tabs",{attrs:{names:t.tabsName},on:{activeIdxChange:t.activeIdxChange}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.getHistoryList.length>0&&1==t.activeIdx,expression:"getHistoryList.length > 0 && activeIdx == 1"}],staticClass:"btns"},[i("button",{staticClass:"delete",on:{click:t.deleteClick}},[i("i",{staticClass:"iconfont icon-delete"}),i("span",[t._v("清除")])])]),i("SongTable",{directives:[{name:"show",rawName:"v-show",value:0==t.activeIdx,expression:"activeIdx == 0"}],attrs:{imgShow:!1,songs:t.getCurrPlayList,mini:!0}}),i("SongTable",{directives:[{name:"show",rawName:"v-show",value:1==t.activeIdx,expression:"activeIdx == 1"}],attrs:{imgShow:!1,songs:t.getHistoryList,mini:!0}})],1)},wt=[],_t=i("01ba"),St=i("17fe"),xt={name:"miniPlayList",components:{SongTable:_t["a"],Tabs:St["a"]},data:function(){return{tabsName:["播放列表","播放历史"],activeIdx:0}},methods:{activeIdxChange:function(t){this.activeIdx=t},deleteClick:function(){this.$store.commit("clearHistoryList")}},computed:Object(u["a"])({},Object($["b"])(["getCurrPlayList","getHistoryList"]))},Mt=xt,Pt=(i("4262"),Object(g["a"])(Mt,bt,wt,!1,null,"c28a520c",null)),kt=Pt.exports,Lt=(i("c740"),i("a434"),window.localStorage),$t={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Lt)return Lt.getItem(t)?Array.isArray(e)?JSON.parse(Lt.getItem(t)):Lt.getItem(t):e},set:function(t,e){Lt&&Lt.setItem(t,e)},clear:function(t){Lt&&Lt.removeItem(t)}},It="__userId__";function Dt(){return Number($t.get(It,null))}function jt(t){return $t.set(It,t),t}var Ot="__volumeVal__";function Tt(t){return Number($t.get(Ot,t))}function Et(t){return $t.set(Ot,t),t}var Nt="__playMode__";function Ut(){return Number($t.get(Nt,0))}function At(t){return $t.set(Nt,t),t}var Bt="__historyPlaylist__",Ht=200;function Vt(){return JSON.parse($t.get(Bt,"[]"))}function Xt(t){var e=Vt(),i=e.findIndex((function(e){return e.id==t.id}));return 0==i||(i>0&&e.splice(i,1),e.unshift(t),Ht&&e.length==Ht&&e.pop(),$t.set(Bt,JSON.stringify(e))),e}function Jt(t){$t.set(Bt,JSON.stringify(t))}var Wt={name:"MusicPlayer",components:{Progress:mt,PlayMode:Ct,miniPlayList:kt},data:function(){return{currMusicUrl:"",currTimeFormat:"0:00",songName:"",volume:Tt(this.$config.defaultVolume),mode:Ut(),miniPlaylistShow:!1}},mounted:function(){this.$refs.audio.volume=this.volume},methods:{togglePlaying:function(){this.getCurrMusic&&this.$store.commit("setPlaying",!this.getPlaying)},miniPlylistClick:function(){this.miniPlaylistShow=!this.miniPlaylistShow},getcurrMusicUrl:function(t){var e=this;this.$store.commit("setPlaying",!1),this.songName=t.name,Object(I["c"])(t.id).then((function(i){if(e.currMusicUrl=i.data.data[0].url,!e.currMusicUrl)return console.log("找不到歌曲 - "+t.name),void e.nextClick();e.$store.commit("addHistoryList",t),setTimeout((function(){e.$store.commit("setPlaying",!0)}),200)})).catch((function(t){e.$store.commit("setAlertMessage",t)}))},getCurrMusicDt:function(){return Object(Y["a"])(this.getCurrMusic?this.getCurrMusic.dt:0)},formatTime:function(t){return Object(Y["a"])(t)},play:function(){this.$refs.audio.play()},pause:function(){this.$refs.audio.pause()},timeUpdate:function(t){this.$store.commit("setCurrTime",t.target.currentTime)},percentChangeEndSong:function(t){this.$refs.audio.currentTime=t*(this.getCurrMusic?this.getCurrMusic.dt:0)/1e3,this.$store.commit("setPlaying",!0)},percentChangeVolume:function(t){this.volume=t,this.$refs.audio.volume=this.volume,Et(t)},prevClick:function(){this.$store.commit("prevIndex",this.mode)},nextClick:function(){this.$store.commit("nextIndex",this.mode),this.$refs.audio.currentTime=0},modeClick:function(t){this.mode=t,At(t)},alImgClick:function(){this.$store.commit("toggleLyricShowSp")}},watch:{getCurrMusic:function(t){if(!t)return this.$store.commit("setPlaying",!1),void(this.songName="");this.getcurrMusicUrl(t)},getPlaying:function(t){t?this.play():this.pause()},getPercent:function(t){this.currTimeFormat=Object(Y["a"])(Math.floor(t*(this.getCurrMusic?this.getCurrMusic.dt:0)))}},computed:Object(u["a"])({},Object($["b"])(["getPlaying","getCurrMusic","getPercent","getCurrMusicAlImg"]))},Ft=Wt,qt=(i("e15f"),Object(g["a"])(Ft,at,ot,!1,null,"64aa6f6f",null)),zt=qt.exports,Gt={name:"App",components:{Header:T,PlayerContent:st,MusicPlayer:zt},data:function(){return{}}},Rt=Gt,Kt=Object(g["a"])(Rt,s,a,!1,null,null,null),Yt=Kt.exports,Qt={uid:Dt()||null,playing:!1,loading:!1,userPlayList:[],playList:[],currMusicIndex:-1,currTime:0,alertMessage:"",alertShow:!1,menuShowSp:!1,lyricShowSp:!1,historyList:Vt()},Zt=Qt,te={setUid:function(t,e){t.uid=e,jt(e)},setUserPlayList:function(t,e){t.userPlayList=e},setAlertMessage:function(t,e){t.alertMessage=e,t.alertShow=!0},toggleAlertShow:function(t){t.alertShow=!t.alertShow},toggleMenuShowSp:function(t){t.menuShowSp=!t.menuShowSp},setMenuShowSp:function(t,e){t.menuShowSp=e},setLyricShowSp:function(t,e){t.lyricShowSp=e},toggleLyricShowSp:function(t){t.lyricShowSp=!t.lyricShowSp},setPlaying:function(t,e){t.playing=e},setLoading:function(t,e){t.loading=e},setPlayList:function(t,e){t.playList=e},clearPlayList:function(t){t.playList=[],t.currMusicIndex=-1},setCurrMusicIndex:function(t,e){t.currMusicIndex=e},nextIndex:function(t,e){if(t.playList.length>0)switch(e){case 0:t.currMusicIndex=(t.currMusicIndex+1)%t.playList.length;break;case 1:t.currMusicIndex=Math.round(Math.random()*t.playList.length);break;case 2:t.currTime=0;break}},prevIndex:function(t){t.playList.length>0&&(t.currMusicIndex-=1,-1==t.currMusicIndex&&(t.currMusicIndex=t.playList.length-1))},setCurrTime:function(t,e){t.currTime=1e3*e},addHistoryList:function(t,e){t.historyList=Xt(e)},clearHistoryList:function(t){t.historyList=[],Jt([])}},ee=te,ie=(i("4160"),i("d81d"),i("159b"),i("db49")),ne=function(t){return t.menuShowSp},re=function(t){return t.lyricShowSp},se=function(t){return t.alertShow},ae=function(t){return t.playing},oe=function(t){return t.alertMessage},ce=function(t){return t.playList[t.currMusicIndex]},ue=function(t){var e=ce(t);return e?e.al.picUrl:ie["a"].playerCoverImg},le=function(t){return t.playList},de=function(t){return t.loading},fe=function(t){return t.playList.length>0?t.currTime/t.playList[t.currMusicIndex].dt:0},me=function(t){return t.historyList},ge=function(t){var e=t.uid,i=t.userPlayList;if(0==i.length)return[];var n=[],r=[],s=[];i.forEach((function(t){t.userId==e?r.push(t):s.push(t)}));var a=function(t){return t.map((function(t){var e=t.id,i=t.name;return{path:"/playlist/".concat(e),meta:{title:i,icon:"icon-play-list"}}}))};return r.length&&n.push({title:"创建的歌单",sublist:a(r)}),s.length&&n.push({title:"收藏的歌单",sublist:a(s)}),n};r["a"].use($["a"]);var he=new $["a"].Store({state:Zt,mutations:ee,getters:n}),pe=i("caf9");i("b20f"),i("a342");r["a"].config.productionTip=!1,r["a"].mixin({computed:{islogged:function(){return Boolean(this.$store.state.uid)}}}),r["a"].use(pe["a"]),r["a"].prototype.$config=ie["a"],new r["a"]({store:he,router:W,render:function(t){return t(Yt)}}).$mount("#app")},5896:function(t,e,i){"use strict";var n=i("bc65"),r=i.n(n);r.a},"5ed3":function(t,e,i){"use strict";var n=i("1af9"),r=i.n(n);r.a},"60d6":function(t,e,i){},"637a":function(t,e,i){"use strict";var n=i("6645"),r=i.n(n);r.a},6645:function(t,e,i){},6943:function(t,e,i){},"8aa0":function(t,e,i){},a342:function(t,e,i){},ac71:function(t,e,i){},acca:function(t,e,i){},b20f:function(t,e,i){},b7e0:function(t,e,i){"use strict";var n=i("acca"),r=i.n(n);r.a},bc65:function(t,e,i){},cdf6:function(t,e,i){},d13d:function(t,e,i){},db49:function(t,e,i){"use strict";e["a"]={defaultVolume:.75,maxSong:500,headerTitle:"Vue-musicPlayer",commentLimit:20,playMode:[{icon:"icon-order",name:"列表循环",id:0},{icon:"icon-random",name:"随机播放",id:1},{icon:"icon-loop",name:"单曲循环",id:2}],loadingImg:"https://cdn.jsdelivr.net/gh/soragoto134/picGo_imgs/imgs/loading.gif",playerCoverImg:"https://cdn.jsdelivr.net/gh/soragoto134/picGo_imgs/imgs/default_album.png"}},df80:function(t,e,i){"use strict";var n=i("ac71"),r=i.n(n);r.a},e15f:function(t,e,i){"use strict";var n=i("d13d"),r=i.n(n);r.a}});
//# sourceMappingURL=app.3d2e4036.js.map